<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>W/linker: libxxx.so: unused DT entry: type 0x6ffffffe arg 0x5a4 | å°éº¦</title><link rel="stylesheet" type="text/css" href="/blog/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="https://unpkg.com/normalize.css"><link rel="stylesheet" type="text/css" href="https://unpkg.com/purecss/build/pure-min.css"><link rel="stylesheet" type="text/css" href="https://unpkg.com/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="https://unpkg.com/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="https://unpkg.com/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/blog/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/blog/favicon.ico"><link rel="apple-touch-icon" href="/blog/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/blog/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/blog/atom.xml"><script src="https://www.googletagmanager.com/gtag/js?id=G-R3NLYDC8PK" async></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-R3NLYDC8PK');
</script><script>(function(c,l,a,r,i,t,y){
    c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
    t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
    y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
})(window, document, "clarity", "script", "n85h4t74i7");
</script><script type="text/javascript" src="https://unpkg.com/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="https://unpkg.com/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="https://unpkg.com/toastr/build/toastr.min.css"><div class="darkmode-toggle">ğŸŒ“</div><script>var prefersDarkMode = window.matchMedia('(prefers-color-scheme: dark)');
var toggle = document.querySelector('.darkmode-toggle');
var html = document.querySelector('html');

html.dataset.dark = localStorage.dark || prefersDarkMode.matches;

toggle.addEventListener('click', () => {
localStorage.dark = !(html.dataset.dark == 'true');
html.dataset.dark = localStorage.dark;
});</script><meta name="generator" content="Hexo 7.3.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">W/linker: libxxx.so: unused DT entry: type 0x6ffffffe arg 0x5a4</h1><a id="logo" href="/blog/.">å°éº¦</a><p class="description">äººç”Ÿçš„å¤§èµ·å¤§è½æ¥å¾—å¤ªçªç„¶ï¼Œæå¾—æˆ‘ç›´æƒ³å°¿å°¿...</p></div><div id="nav-menu"><a class="current" href="/blog/."><i class="fa fa-home"> é¦–é¡µ</i></a><a href="/blog/archives/"><i class="fa fa-archive"> å½’æ¡£</i></a><a href="/blog/history/"><i class="fa fa-book"> å†å²</i></a><a href="/blog/about/"><i class="fa fa-user"> å…³äº</i></a><a href="/blog/guestbook/"><i class="fa fa-comments"> ç•™è¨€</i></a><a href="/blog/atom.xml"><i class="fa fa-rss"> è®¢é˜…</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">W/linker: libxxx.so: unused DT entry: type 0x6ffffffe arg 0x5a4</h1><div class="post-meta">2019-03-05<span> | </span><span class="category"><a href="/blog/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">å­¦ä¹ ç¬”è®°</a></span><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> é˜…è¯»</span></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 2.5k</span><span class="post-meta-item-text"> å­—</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-clock-o"></i><span class="post-count"> 13</span><span class="post-meta-item-text"> åˆ†é’Ÿ</span></span></span></div><a class="disqus-comment-count" href="/blog/2019/03/05/w-linker-libxxx-so-unused-dt-entry-type-0x6ffffffe-arg-0x5a4/#vcomment"><span class="valine-comment-count" data-xid="/blog/2019/03/05/w-linker-libxxx-so-unused-dt-entry-type-0x6ffffffe-arg-0x5a4/"></span><span> æ¡è¯„è®º</span></a><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">æ–‡ç« ç›®å½•</div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Q-What-are-%E2%80%9Cunused-DT-entry%E2%80%9D-errors"><span class="toc-number">1.</span> <span class="toc-text">Q:What are â€œunused DT entryâ€ errors?</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Q-What-is-a-%E2%80%9CDT-entry%E2%80%9D"><span class="toc-number">2.</span> <span class="toc-text">Q: What is a â€œDT entryâ€?</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Q-When-does-this-happen"><span class="toc-number">3.</span> <span class="toc-text">Q: When does this happen?</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Q-How-do-I-find-what-DT-entries-my-system-or-binaries-are-using"><span class="toc-number">4.</span> <span class="toc-text">Q: How do I find what DT entries my system or binaries are using?</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Q-So-how-do-you-solve-or-deal-with-these-issues"><span class="toc-number">5.</span> <span class="toc-text">Q: So how do you solve or deal with these issues?</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Quick-you-don%E2%80%99t-have-any-sources-or-just-can%E2%80%99t-be-bothered"><span class="toc-number">5.1.</span> <span class="toc-text">The Quick (you donâ€™t have any sources or just canâ€™t be bothered)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Bad-you-have-the-sources"><span class="toc-number">5.2.</span> <span class="toc-text">The Bad (you have the sources)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Ugly-You-just-want-your-app-to-work-with-any-dirty-binary"><span class="toc-number">5.3.</span> <span class="toc-text">The Ugly (You just want your app to work with any dirty binary.)</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Q-What-else"><span class="toc-number">6.</span> <span class="toc-text">Q. What else?</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#WARNING-linker-demo-unused-DT-entry-type-0x6ffffffe-%E8%A7%A3%E5%86%B3%EF%BC%81%EF%BC%81"><span class="toc-number">7.</span> <span class="toc-text">WARNING: linker: .&#x2F;demo: unused DT entry: type 0x6ffffffe è§£å†³ï¼ï¼</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Reference"><span class="toc-number">8.</span> <span class="toc-text">Reference</span></a></li></ol></div></div><div class="post-content"><p>æˆ‘æ­£åœ¨ä½¿ç”¨<a target="_blank" rel="noopener" href="https://github.com/xmaihh/Android-Serialport">libserialport.so</a>,åœ¨è¿è¡Œæ—¶ï¼Œæˆ‘æ”¶åˆ°ä»¥ä¸‹è­¦å‘Š:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">W/linker: libserialport.so: unused DT entry: type <span class="number">0x6ffffffe</span> arg <span class="number">0x5a4</span></span><br><span class="line">    libserialport.so: unused DT entry: type <span class="number">0x6fffffff</span> arg <span class="number">0x1</span></span><br></pre></td></tr></table></figure>

<h1 id="Q-What-are-â€œunused-DT-entryâ€-errors"><a href="#Q-What-are-â€œunused-DT-entryâ€-errors" class="headerlink" title="Q:What are â€œunused DT entryâ€ errors?"></a>Q:What are â€œunused DT entryâ€ errors?</h1><p>If you have reached this page, itâ€™s probably because you have compiled or attempted to run some binaries on your ARM based Android system, with the result that your binary&#x2F;app crashes or generates a lot of warnings in your logcat. Typically something like this:</p>
<p>å¦‚æœæ‚¨å·²åˆ°è¾¾æ­¤é¡µé¢ï¼Œå¯èƒ½æ˜¯å› ä¸ºæ‚¨å·²ç¼–è¯‘æˆ–å°è¯•åœ¨åŸºäºARMçš„Androidç³»ç»Ÿä¸Šè¿è¡ŒæŸäº›äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œç»“æœå¯¼è‡´æ‚¨çš„äºŒè¿›åˆ¶æ–‡ä»¶&#x2F;åº”ç”¨ç¨‹åºå´©æºƒæˆ–åœ¨æ‚¨çš„ç³»ç»Ÿä¸­ç”Ÿæˆå¤§é‡è­¦å‘ŠÂ  logcatã€‚é€šå¸¸æ˜¯è¿™æ ·çš„:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WARNING: linker: /blahblah/libopenssl.so: unused DT entry: type <span class="number">0x6ffffffe</span> arg <span class="number">0x1188</span></span><br></pre></td></tr></table></figure>

<h1 id="Q-What-is-a-â€œDT-entryâ€"><a href="#Q-What-is-a-â€œDT-entryâ€" class="headerlink" title="Q: What is a â€œDT entryâ€?"></a>Q: What is a â€œDT entryâ€?</h1><p>In a few words, they are descriptive array entries in the file structure of an ELF file. Specifically they are known as  Dynamic Array Tags and are requirements for executable and shared objects. However, not all entries are required or available, depending on the processor and kernel architecture.</p>
<p>In our case we are faced with a â€œWarningâ€ that one of these are â€œunusedâ€. What that means is, that your executable or library (*.so) files has been compiled with the DT entry indicated, but your kernel is not supporting that entry, for various reasons. The best examples are found on ARM based Android systems, where the system library paths are fixed and the cross compilers used for your firmware (OS&#x2F;kernel) are set not to use these entries. Usually the binaries still run just fine, but the kernel is flagging this warning every time youâ€™re using it.</p>
<p>ç®€è€Œè¨€ä¹‹ï¼Œå®ƒä»¬æ˜¯<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Executable_and_Linkable_Format">ELF</a>æ–‡ä»¶çš„æ–‡ä»¶ç»“æ„ä¸­çš„æè¿°æ€§æ•°ç»„æ¡ç›®Â  ã€‚å…·ä½“è€Œè¨€ï¼Œå®ƒä»¬è¢«ç§°ä¸ºÂ  Dynamic Array TagsÂ å¯æ‰§è¡Œå’Œå…±äº«å¯¹è±¡çš„è¦æ±‚ã€‚ä½†æ˜¯ï¼Œå¹¶éæ‰€æœ‰æ¡ç›®éƒ½æ˜¯å¿…éœ€çš„æˆ–å¯ç”¨çš„ï¼Œå…·ä½“å–å†³äºå¤„ç†å™¨å’Œå†…æ ¸ä½“ç³»ç»“æ„ã€‚åœ¨æˆ‘ä»¬çš„æ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬é¢ä¸´ä¸€ä¸ªâ€œè­¦å‘Šâ€ï¼Œå…¶ä¸­ä¸€ä¸ªæ˜¯â€œæœªä½¿ç”¨â€ã€‚è¿™æ„å‘³ç€ï¼Œæ‚¨çš„å¯æ‰§è¡Œæ–‡ä»¶æˆ–åº“ï¼ˆ*.soï¼‰æ–‡ä»¶å·²ä½¿ç”¨Â æŒ‡ç¤ºçš„DTæ¡ç›®è¿›è¡Œç¼–è¯‘Â  ï¼Œä½†ç”±äºå„ç§åŸå› ï¼Œæ‚¨çš„å†…æ ¸ä¸æ”¯æŒè¯¥æ¡ç›®ã€‚æœ€å¥½çš„ä¾‹å­å¯ä»¥åœ¨åŸºäºARMçš„Androidç³»ç»Ÿä¸Šæ‰¾åˆ°ï¼Œå…¶ä¸­ç³»ç»Ÿåº“è·¯å¾„æ˜¯å›ºå®šçš„ï¼Œç”¨äºå›ºä»¶çš„äº¤å‰ç¼–è¯‘å™¨ï¼ˆOS &#x2F;å†…æ ¸ï¼‰è®¾ç½®ä¸ºä¸ä½¿ç”¨è¿™äº›æ¡ç›®ã€‚é€šå¸¸äºŒè¿›åˆ¶æ–‡ä»¶ä»ç„¶å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œä½†å†…æ ¸æ¯æ¬¡ä½¿ç”¨å®ƒæ—¶éƒ½ä¼šæ ‡è®°æ­¤è­¦å‘Šã€‚</p>
<h1 id="Q-When-does-this-happen"><a href="#Q-When-does-this-happen" class="headerlink" title="Q: When does this happen?"></a>Q: When does this happen?</h1><p>This can happen when:</p>
<ul>
<li>Your ARM kernel is cross-compiled using the wrong flags (usually meant for other processor architectures).</li>
<li>æ‚¨çš„ARMå†…æ ¸ä½¿ç”¨é”™è¯¯çš„æ ‡å¿—è¿›è¡Œäº¤å‰ç¼–è¯‘ï¼ˆé€šå¸¸ç”¨äºå…¶ä»–å¤„ç†å™¨ä½“ç³»ç»“æ„ï¼‰ã€‚</li>
<li>Your ARM binaries and libraries are cross-compiled using AOS deprecated compilation flags.</li>
<li>æ‚¨çš„ARMäºŒè¿›åˆ¶æ–‡ä»¶å’Œåº“æ˜¯ä½¿ç”¨AOSå¼ƒç”¨çš„ç¼–è¯‘æ ‡å¿—è¿›è¡Œäº¤å‰ç¼–è¯‘çš„ã€‚</li>
<li>and probably other ways yet to be discovered..</li>
<li>å¯èƒ½è¿˜æœ‰å…¶ä»–æ–¹æ³•å°šå¾…å‘ç°..</li>
</ul>
<blockquote>
<p>Starting from 5.1 (API 22) the Android linker warns about the VERNEED and VERNEEDNUM ELF dynamic sections.</p>
</blockquote>
<blockquote>
<p>ä»5.1ï¼ˆAPI 22ï¼‰å¼€å§‹ï¼ŒAndroidé“¾æ¥å™¨ä¼šè­¦å‘ŠVERNEEDå’ŒVERNEEDNUM ELFåŠ¨æ€éƒ¨åˆ†ã€‚</p>
</blockquote>
<p>The most common flags that cause this error on Android devices are:</p>
<p>åœ¨Androidè®¾å¤‡ä¸Šå¯¼è‡´æ­¤é”™è¯¯çš„æœ€å¸¸è§æ ‡å¿—æ˜¯ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">DT_RPATH        <span class="number">0x0f</span> (<span class="number">15</span>)       The DT_STRTAB string table offset of a <span class="literal">null</span>-terminated library search path string. </span><br><span class="line">                                This element<span class="string">&#x27;s use has been superseded by DT_RUNPATH.</span></span><br><span class="line"><span class="string">DT_RUNPATH      0x1d (29)       The DT_STRTAB string table offset of a null-terminated library search path string.</span></span><br><span class="line"><span class="string">DT_VERNEED      0x6ffffffe      The address of the version dependency table. Elements within this table contain </span></span><br><span class="line"><span class="string">                                indexes into the string table DT_STRTAB. This element requires that the </span></span><br><span class="line"><span class="string">                                DT_VERNEEDNUM element also be present.</span></span><br><span class="line"><span class="string">DT_VERNEEDNUM   0x6fffffff      The number of entries in the DT_VERNEEDNUM table.</span></span><br></pre></td></tr></table></figure>

<p>Tracking down the error above, we find that this message comes from the <code>bionic</code> library <a target="_blank" rel="noopener" href="https://github.com/aosp-mirror/platform_bionic/blob/1fedfedda8a2b75ed56669e28265f943312ec22f/linker/linker.cpp#L2967-L2986">linker.cpp</a>:<br>è¿½è¸ªä¸Šé¢çš„é”™è¯¯ï¼Œæˆ‘ä»¬å‘ç°æ­¤æ¶ˆæ¯æ¥è‡ªÂ  <code>bionic</code>Â åº“<a target="_blank" rel="noopener" href="https://github.com/aosp-mirror/platform_bionic/blob/1fedfedda8a2b75ed56669e28265f943312ec22f/linker/linker.cpp#L2967-L2986">linker.cpp</a>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">case</span> DT_VERNEED:</span><br><span class="line">    verneed_ptr_ = load_bias + d-&gt;d_un.d_ptr;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">case</span> DT_VERNEEDNUM:</span><br><span class="line">    verneed_cnt_ = d-&gt;d_un.d_val;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">case</span> DT_RUNPATH:</span><br><span class="line">    <span class="comment">// this is parsed after we have strtab initialized (see below).</span></span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">default</span>:</span><br><span class="line">    <span class="keyword">if</span> (!relocating_linker) &#123;</span><br><span class="line">      DL_WARN(<span class="string">&quot;\&quot;%s\&quot; unused DT entry: type %p arg %p&quot;</span>, get_realpath(),</span><br><span class="line">          reinterpret_cast&lt;<span class="keyword">void</span>*&gt;(d-&gt;d_tag), reinterpret_cast&lt;<span class="keyword">void</span>*&gt;(d-&gt;d_un.d_val));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>The code (above) supporting this symbol versioning was committed on April 9, 2015. Thus if your NDK build is either set to support APIâ€™s earlier than this, or using build tools linking to this earlier library, you will get these warnings.</p>
<p>æ”¯æŒæ­¤<a target="_blank" rel="noopener" href="https://lists.debian.org/lsb-spec/1999/12/msg00017.html">ç¬¦å·ç‰ˆæœ¬æ§åˆ¶</a>çš„ä»£ç ï¼ˆä¸Šæ–‡ï¼‰Â  Â äº<a target="_blank" rel="noopener" href="https://github.com/android/platform_bionic/commit/2a815361448d01b0f4e575f507ce31913214c536#diff-9d78f752a519d0c92b4cf2c888fe26e4">2015</a>å¹´<a target="_blank" rel="noopener" href="https://github.com/android/platform_bionic/commit/2a815361448d01b0f4e575f507ce31913214c536#diff-9d78f752a519d0c92b4cf2c888fe26e4">4æœˆ9æ—¥</a>æäº¤Â  ã€‚å› æ­¤ï¼Œå¦‚æœæ‚¨çš„NDKæ„å»ºè®¾ç½®ä¸ºæ”¯æŒæ—©äºæ­¤çš„APIï¼Œæˆ–è€…ä½¿ç”¨é“¾æ¥åˆ°æ­¤æ—©æœŸåº“çš„æ„å»ºå·¥å…·ï¼Œæ‚¨å°†æ”¶åˆ°è¿™äº›è­¦å‘Šã€‚</p>
<h1 id="Q-How-do-I-find-what-DT-entries-my-system-or-binaries-are-using"><a href="#Q-How-do-I-find-what-DT-entries-my-system-or-binaries-are-using" class="headerlink" title="Q: How do I find what DT entries my system or binaries are using?"></a>Q: How do I find what DT entries my system or binaries are using?</h1><p>There are many ways to do this:</p>
<ol>
<li>You look into your kernel sources for <code>&lt;linux/elf.h&gt;</code>.</li>
<li>You look in your Android NDK installation folders and check:</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">To find all elf.h files:</span></span><br><span class="line">find /&lt;path_to&gt;/ndk/platforms/android-*/arch-arm*/usr/include/linux/ -iname &quot;elf.h&quot;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>Do an readelf of your binary:</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">readelf --dynamic libopenssl.so</span></span><br><span class="line"></span><br><span class="line"> Dynamic section at offset 0x23b960 contains 28 entries:</span><br><span class="line"> Tag        Type                         Name/Value</span><br><span class="line"> 0x00000003 (PLTGOT)                     0x23ce18</span><br><span class="line"> 0x00000002 (PLTRELSZ)                   952 (bytes)</span><br><span class="line"> 0x00000017 (JMPREL)                     0x15e70</span><br><span class="line"> 0x00000014 (PLTREL)                     REL</span><br><span class="line"> 0x00000011 (REL)                        0x11c8</span><br><span class="line"> 0x00000012 (RELSZ)                      85160 (bytes)</span><br><span class="line"> 0x00000013 (RELENT)                     8 (bytes)</span><br><span class="line"> 0x6ffffffa (RELCOUNT)                   10632</span><br><span class="line"> 0x00000015 (DEBUG)                      0x0</span><br><span class="line"> 0x00000006 (SYMTAB)                     0x148</span><br><span class="line"> 0x0000000b (SYMENT)                     16 (bytes)</span><br><span class="line"> 0x00000005 (STRTAB)                     0x918</span><br><span class="line"> 0x0000000a (STRSZ)                      1011 (bytes)</span><br><span class="line"> 0x00000004 (HASH)                       0xd0c</span><br><span class="line"> 0x00000001 (NEEDED)                     Shared library: [libdl.so]</span><br><span class="line"> 0x00000001 (NEEDED)                     Shared library: [libc.so]</span><br><span class="line"> 0x0000001a (FINI_ARRAY)                 0x238458</span><br><span class="line"> 0x0000001c (FINI_ARRAYSZ)               8 (bytes)</span><br><span class="line"> 0x00000019 (INIT_ARRAY)                 0x238460</span><br><span class="line"> 0x0000001b (INIT_ARRAYSZ)               16 (bytes)</span><br><span class="line"> 0x00000020 (PREINIT_ARRAY)              0x238470</span><br><span class="line"> 0x00000021 (PREINIT_ARRAYSZ)            0x8</span><br><span class="line"> 0x0000001e (FLAGS)                      BIND_NOW</span><br><span class="line"> 0x6ffffffb (FLAGS_1)                    Flags: NOW</span><br><span class="line"> 0x6ffffff0 (VERSYM)                     0x108c</span><br><span class="line"> 0x6ffffffe (VERNEED)                    0x1188</span><br><span class="line"> 0x6fffffff (VERNEEDNUM)                 2</span><br><span class="line"> 0x00000000 (NULL)                       0x0</span><br></pre></td></tr></table></figure>

<p> As you can see from the error above, the type corresponds to DT_VERNEED.</p>
<p>From <a target="_blank" rel="noopener" href="http://docs.oracle.com/cd/E23824_01/html/819-0690/chapter6-42444.html#scrolltoc">THIS</a> document:</p>
<blockquote>
<p>DT_RPATH</p>
</blockquote>
<p>This element holds the string table offset of a null-terminated search library search path string, discussed in â€œShared Object Dependencies.â€ The offset is an index into the table recorded in the DT_STRTAB entry. DT_RPATH may give a string that holds a list of directories, separated by colons (:). All LD_LIBRARY_PATH directories are searched after those from DT_RPATH.</p>
<p>DT_RPATHæ­¤å…ƒç´ ä¿å­˜ä»¥â€œå…±äº«å¯¹è±¡ä¾èµ–å…³ç³»â€ä¸­è®¨è®ºçš„ä»¥nullç»“å°¾çš„æœç´¢åº“æœç´¢è·¯å¾„å­—ç¬¦ä¸²çš„å­—ç¬¦ä¸²è¡¨åç§»é‡ã€‚åç§»é‡æ˜¯DT_STRTABæ¡ç›®ä¸­è®°å½•çš„è¡¨çš„ç´¢å¼•ã€‚DT_RPATHå¯ä»¥ç»™å‡ºä¸€ä¸ªåŒ…å«ç›®å½•åˆ—è¡¨çš„å­—ç¬¦ä¸²ï¼Œä»¥å†’å·ï¼ˆ:)åˆ†éš”ã€‚åœ¨DT_RPATHä¹‹åæœç´¢æ‰€æœ‰LD_LIBRARY_PATHç›®å½•ã€‚</p>
<h1 id="Q-So-how-do-you-solve-or-deal-with-these-issues"><a href="#Q-So-how-do-you-solve-or-deal-with-these-issues" class="headerlink" title="Q: So how do you solve or deal with these issues?"></a>Q: So how do you solve or deal with these issues?</h1><p>There are essentially 3 ways to deal with this:</p>
<ol>
<li>the quick</li>
<li>the bad</li>
<li>the ugly</li>
</ol>
<h2 id="The-Quick-you-donâ€™t-have-any-sources-or-just-canâ€™t-be-bothered"><a href="#The-Quick-you-donâ€™t-have-any-sources-or-just-canâ€™t-be-bothered" class="headerlink" title="The Quick (you donâ€™t have any sources or just canâ€™t be bothered)"></a>The Quick (you donâ€™t have any sources or just canâ€™t be bothered)</h2><p>Use an â€œELF cleanerâ€ to remove the offending DT entries from a all your binaries. This is an easy and quick remedy, especially when you donâ€™t have the sources to recompile them properly for your system. There are at least <a target="_blank" rel="noopener" href="https://github.com/kost/android-elf-cleaner">two cleaners</a> out there that you can use.</p>
<h2 id="The-Bad-you-have-the-sources"><a href="#The-Bad-you-have-the-sources" class="headerlink" title="The Bad (you have the sources)"></a>The Bad (you have the sources)</h2><p>Is the right way to do it, because youâ€™ll become a bad-ass ARM cross compiler guru in the process of getting it to work. You basically need to find and tune the compiler settings in the Makefiles used.</p>
<p>From <a target="_blank" rel="noopener" href="https://gitlab.com/jbwhips883/termux-packages">here</a>:</p>
<p><a target="_blank" rel="noopener" href="https://github.com/kost/android-elf-cleaner">è§£å†³æ–¹æ³•ï¼šhttps://github.com/kost/android-elf-cleaner</a></p>
<blockquote>
<p>The Android linker (&#x2F;system&#x2F;bin&#x2F;linker) does not support RPATH or RUNPATH, so we set LD_LIBRARY_PATH&#x3D;$USR&#x2F;lib and try to avoid building useless rpath entries with â€“disable-rpath configure flags. Another option to avoid depending on LD_LIBRARY_PATH would be supplying a custom linker - this is not done due to the overhead of maintaining a custom linker.</p>
</blockquote>
<h2 id="The-Ugly-You-just-want-your-app-to-work-with-any-dirty-binary"><a href="#The-Ugly-You-just-want-your-app-to-work-with-any-dirty-binary" class="headerlink" title="The Ugly (You just want your app to work with any dirty binary.)"></a>The Ugly (You just want your app to work with any dirty binary.)</h2><p>You tell your Java app not to freak out when checking for null in error handlers and instead get fed these warnings, possibly causing fatal exceptions. Use something like:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">OpensslErrorThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> opensslStderr.readLine();</span><br><span class="line">                <span class="keyword">if</span>(line == <span class="literal">null</span>)&#123;</span><br><span class="line">                    <span class="comment">// OK</span></span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(line.contains(<span class="string">&quot;unused DT entry&quot;</span>))&#123;</span><br><span class="line">                    Log.i(TAG, <span class="string">&quot;Ignoring \&quot;unused DT entry\&quot; error from openssl: &quot;</span> + line);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">// throw exception!</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span>(Exception e) &#123;</span><br><span class="line">            Log.e(TAG, <span class="string">&quot;Exception!&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>This is very bad and ugly as it doesnâ€™t solve anything, while bloating your code. In addition, the warnings are there for a reason, and that is that in future AOS versions, this will become a full fledged error!</p>
<h1 id="Q-What-else"><a href="#Q-What-else" class="headerlink" title="Q. What else?"></a>Q. What else?</h1><p>Many changes in the APIâ€™s between 18-25 (J to N) has been made in way the Android kernel and libraries are compiled. I cannot provide a remotely close explanation of all that, but perhaps this will help guide you in the right direction. The best sources is of course looking in the Android sources and documentation itself.</p>
<p>For example, <a target="_blank" rel="noopener" href="https://github.com/android/platform_bionic/blob/master/android-changes-for-ndk-developers.md">HERE</a> or <a target="_blank" rel="noopener" href="https://developer.android.com/ndk/guides/standalone_toolchain.html">HERE</a>.</p>
<p>And finally the full list:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">Name                    Value           d_un            Executable              Shared Object</span><br><span class="line">---------------------------------------------------------------------------------------------</span><br><span class="line">DT_NULL                 0               Ignored         Mandatory               Mandatory</span><br><span class="line">DT_NEEDED               1               d_val           Optional                Optional</span><br><span class="line">DT_PLTRELSZ             2               d_val           Optional                Optional</span><br><span class="line">DT_PLTGOT               3               d_ptr           Optional                Optional</span><br><span class="line">DT_HASH                 4               d_ptr           Mandatory               Mandatory</span><br><span class="line">DT_STRTAB               5               d_ptr           Mandatory               Mandatory</span><br><span class="line">DT_SYMTAB               6               d_ptr           Mandatory               Mandatory</span><br><span class="line">DT_RELA                 7               d_ptr           Mandatory               Optional</span><br><span class="line">DT_RELASZ               8               d_val           Mandatory               Optional</span><br><span class="line">DT_RELAENT              9               d_val           Mandatory               Optional</span><br><span class="line">DT_STRSZ                0x0a (10)       d_val           Mandatory               Mandatory</span><br><span class="line">DT_SYMENT               0x0b (11)       d_val           Mandatory               Mandatory</span><br><span class="line">DT_INIT                 0x0c (12)       d_ptr           Optional                Optional</span><br><span class="line">DT_FINI                 0x0d (13)       d_ptr           Optional                Optional</span><br><span class="line">DT_SONAME               0x0e (14)       d_val           Ignored                 Optional</span><br><span class="line">DT_RPATH                0x0f (15)       d_val           Optional                Optional</span><br><span class="line">DT_SYMBOLIC             0x10 (16)       Ignored         Ignored                 Optional</span><br><span class="line">DT_REL                  0x11 (17)       d_ptr           Mandatory               Optional</span><br><span class="line">DT_RELSZ                0x12 (18)       d_val           Mandatory               Optional</span><br><span class="line">DT_RELENT               0x13 (19)       d_val           Mandatory               Optional</span><br><span class="line">DT_PLTREL               0x14 (20)       d_val           Optional                Optional</span><br><span class="line">DT_DEBUG                0x15 (21)       d_ptr           Optional                Ignored</span><br><span class="line">DT_TEXTREL              0x16 (22)       Ignored         Optional                Optional</span><br><span class="line">DT_JMPREL               0x17 (23)       d_ptr           Optional                Optional</span><br><span class="line">DT_BIND_NOW             0x18 (24)       Ignored         Optional                Optional</span><br><span class="line">DT_INIT_ARRAY           0x19 (25)       d_ptr           Optional                Optional</span><br><span class="line">DT_FINI_ARRAY           0x1a (26)       d_ptr           Optional                Optional</span><br><span class="line">DT_INIT_ARRAYSZ         0x1b (27)       d_val           Optional                Optional</span><br><span class="line">DT_FINI_ARRAYSZ         0x1c (28)       d_val           Optional                Optional</span><br><span class="line">DT_RUNPATH              0x1d (29)       d_val           Optional                Optional</span><br><span class="line">DT_FLAGS                0x1e (30)       d_val           Optional                Optional</span><br><span class="line">DT_ENCODING             0x1f (32)       Unspecified     Unspecified             Unspecified</span><br><span class="line">DT_PREINIT_ARRAY        0x20 (32)       d_ptr           Optional                Ignored</span><br><span class="line">DT_PREINIT_ARRAYSZ      0x21 (33)       d_val           Optional                Ignored</span><br><span class="line">DT_MAXPOSTAGS           0x22 (34)       Unspecified     Unspecified             Unspecified</span><br><span class="line">DT_LOOS                 0x6000000d      Unspecified     Unspecified             Unspecified</span><br><span class="line">DT_SUNW_AUXILIARY       0x6000000d      d_ptr           Unspecified             Optional</span><br><span class="line">DT_SUNW_RTLDINF         0x6000000e      d_ptr           Optional                Optional</span><br><span class="line">DT_SUNW_FILTER          0x6000000e      d_ptr           Unspecified             Optional</span><br><span class="line">DT_SUNW_CAP             0x60000010      d_ptr           Optional                Optional</span><br><span class="line">DT_SUNW_SYMTAB          0x60000011      d_ptr           Optional                Optional</span><br><span class="line">DT_SUNW_SYMSZ           0x60000012      d_val           Optional                Optional</span><br><span class="line">DT_SUNW_ENCODING        0x60000013      Unspecified     Unspecified             Unspecified</span><br><span class="line">DT_SUNW_SORTENT         0x60000013      d_val           Optional                Optional</span><br><span class="line">DT_SUNW_SYMSORT         0x60000014      d_ptr           Optional                Optional</span><br><span class="line">DT_SUNW_SYMSORTSZ       0x60000015      d_val           Optional                Optional</span><br><span class="line">DT_SUNW_TLSSORT         0x60000016      d_ptr           Optional                Optional</span><br><span class="line">DT_SUNW_TLSSORTSZ       0x60000017      d_val           Optional                Optional</span><br><span class="line">DT_SUNW_CAPINFO         0x60000018      d_ptr           Optional                Optional</span><br><span class="line">DT_SUNW_STRPAD          0x60000019      d_val           Optional                Optional</span><br><span class="line">DT_SUNW_CAPCHAIN        0x6000001a      d_ptr           Optional                Optional</span><br><span class="line">DT_SUNW_LDMACH          0x6000001b      d_val           Optional                Optional</span><br><span class="line">DT_SUNW_CAPCHAINENT     0x6000001d      d_val           Optional                Optional</span><br><span class="line">DT_SUNW_CAPCHAINSZ      0x6000001f      d_val           Optional                Optional</span><br><span class="line">DT_HIOS                 0x6ffff000      Unspecified     Unspecified             Unspecified</span><br><span class="line">DT_VALRNGLO             0x6ffffd00      Unspecified     Unspecified             Unspecified</span><br><span class="line">DT_CHECKSUM             0x6ffffdf8      d_val           Optional                Optional</span><br><span class="line">DT_PLTPADSZ             0x6ffffdf9      d_val           Optional                Optional</span><br><span class="line">DT_MOVEENT              0x6ffffdfa      d_val           Optional                Optional</span><br><span class="line">DT_MOVESZ               0x6ffffdfb      d_val           Optional                Optional</span><br><span class="line">DT_POSFLAG_1            0x6ffffdfd      d_val           Optional                Optional</span><br><span class="line">DT_SYMINSZ              0x6ffffdfe      d_val           Optional                Optional</span><br><span class="line">DT_SYMINENT             0x6ffffdff      d_val           Optional                Optional</span><br><span class="line">DT_VALRNGHI             0x6ffffdff      Unspecified     Unspecified             Unspecified</span><br><span class="line">DT_ADDRRNGLO            0x6ffffe00      Unspecified     Unspecified             Unspecified</span><br><span class="line">DT_CONFIG               0x6ffffefa      d_ptr           Optional                Optional</span><br><span class="line">DT_DEPAUDIT             0x6ffffefb      d_ptr           Optional                Optional</span><br><span class="line">DT_AUDIT                0x6ffffefc      d_ptr           Optional                Optional</span><br><span class="line">DT_PLTPAD               0x6ffffefd      d_ptr           Optional                Optional</span><br><span class="line">DT_MOVETAB              0x6ffffefe      d_ptr           Optional                Optional</span><br><span class="line">DT_SYMINFO              0x6ffffeff      d_ptr           Optional                Optional</span><br><span class="line">DT_ADDRRNGHI            0x6ffffeff      Unspecified     Unspecified             Unspecified</span><br><span class="line">DT_RELACOUNT            0x6ffffff9      d_val           Optional                Optional</span><br><span class="line">DT_RELCOUNT             0x6ffffffa      d_val           Optional                Optional</span><br><span class="line">DT_FLAGS_1              0x6ffffffb      d_val           Optional                Optional</span><br><span class="line">DT_VERDEF               0x6ffffffc      d_ptr           Optional                Optional</span><br><span class="line">DT_VERDEFNUM            0x6ffffffd      d_val           Optional                Optional</span><br><span class="line">DT_VERNEED              0x6ffffffe      d_ptr           Optional                Optional</span><br><span class="line">DT_VERNEEDNUM           0x6fffffff      d_val           Optional                Optional</span><br><span class="line">DT_LOPROC               0x70000000      Unspecified     Unspecified             Unspecified</span><br><span class="line">DT_SPARC_REGISTER       0x70000001      d_val           Optional                Optional</span><br><span class="line">DT_AUXILIARY            0x7ffffffd      d_val           Unspecified             Optional</span><br><span class="line">DT_USED                 0x7ffffffe      d_val           Optional                Optional</span><br><span class="line">DT_FILTER               0x7fffffff      d_val           Unspecified             Optional</span><br><span class="line">DT_HIPROC               0x7fffffff      Unspecified     Unspecified             Unspecified</span><br></pre></td></tr></table></figure>
<h1 id="WARNING-linker-demo-unused-DT-entry-type-0x6ffffffe-è§£å†³ï¼ï¼"><a href="#WARNING-linker-demo-unused-DT-entry-type-0x6ffffffe-è§£å†³ï¼ï¼" class="headerlink" title="WARNING: linker: .&#x2F;demo: unused DT entry: type 0x6ffffffe è§£å†³ï¼ï¼"></a>WARNING: linker: .&#x2F;demo: unused DT entry: type 0x6ffffffe è§£å†³ï¼ï¼</h1><ul>
<li>demo.c</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;www.chinapyg.com!\n&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Android.mk</li>
</ul>
<figure class="highlight mk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">LOCAL_PATH := <span class="variable">$(<span class="built_in">call</span> my-<span class="built_in">dir</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">include</span> <span class="variable">$(CLEAR_VARS)</span></span><br><span class="line"></span><br><span class="line">LOCAL_MODULE    := demo </span><br><span class="line">LOCAL_SRC_FILES := ../demo.c </span><br><span class="line">LOCAL_ARM_MODE := arm</span><br><span class="line">LOCAL_CFLAGS := -g</span><br><span class="line">LOCAL_CFLAGS += -pie -fPIE</span><br><span class="line">LOCAL_LDFLAGS += -pie -fPIE</span><br><span class="line"></span><br><span class="line"><span class="keyword">include</span> <span class="variable">$(BUILD_EXECUTABLE)</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Application.mk</li>
</ul>
<figure class="highlight mk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">APP_OPTIM := release</span><br><span class="line">APP_PLATFORM := android-14  </span><br><span class="line">APP_ABI := armeabi-v7a</span><br></pre></td></tr></table></figure>

<ul>
<li>NDKç¼–è¯‘:</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\piao\Downloads\adbi\demo\jni</span><br><span class="line">Î» ndk-build.cmd</span><br><span class="line">[armeabi-v7a] Compile arm    : demo &lt;= demo.c</span><br><span class="line">[armeabi-v7a] Executable     : demo</span><br><span class="line">[armeabi-v7a] Install        : demo =&gt; libs/armeabi-v7a/demo</span><br></pre></td></tr></table></figure>

<p>ç»è¿‡æµ‹è¯•~~</p>
<p>æ­¤è­¦å‘Šåªä¼šåœ¨5.0ä»¥ä¸Šç³»ç»Ÿå‡ºç°ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@ido:/data/local/tmp <span class="comment"># ./demo</span></span><br><span class="line">WARNING: linker: ./demo: unused DT entry: <span class="built_in">type</span> 0x6ffffffe arg 0x41c</span><br><span class="line">WARNING: linker: ./demo: unused DT entry: <span class="built_in">type</span> 0x6fffffff arg 0x1</span><br><span class="line">www.chinapyg.com!</span><br></pre></td></tr></table></figure>

<p>è§£å†³æ–¹æ³•ï¼š<a target="_blank" rel="noopener" href="https://github.com/kost/android-elf-cleaner">https://github.com/kost/android-elf-cleaner</a></p>
<p>åœ¨Ubuntu16.04ç¼–è¯‘å:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">piao@piaopiao:~/Desktop/android-elf-cleaner$ make</span><br><span class="line">g++   -std=c++14 -Wall -Wextra -pedantic -Werror android-elf-cleaner.cpp -o android-elf-cleaner</span><br></pre></td></tr></table></figure>

<p>ç„¶åæ‰§è¡Œ:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">piao@piaopiao:~/Desktop/android-elf-cleaner$ ./android-elf-cleaner demo</span><br><span class="line">./android-elf-cleaner: Removing the DT_VERNEEDED dynamic section entry from <span class="string">&#x27;demo&#x27;</span></span><br><span class="line">./android-elf-cleaner: Removing the DT_VERNEEDNUM dynamic section entry from <span class="string">&#x27;demo&#x27;</span></span><br><span class="line">piao@piaopiao:~/Desktop/android-elf-cleaner$</span><br></pre></td></tr></table></figure>

<p>å†æ¬¡pushåˆ°æ‰‹æœºé‡Œé¢è¿è¡Œ:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@ido:/data/local/tmp <span class="comment"># ./demo</span></span><br><span class="line">www.chinapyg.com!</span><br></pre></td></tr></table></figure>

<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/33206409/unused-dt-entry-type-0x1d-arg">https://stackoverflow.com/questions/33206409/unused-dt-entry-type-0x1d-arg</a><br><a target="_blank" rel="noopener" href="http://blog.sina.com.cn/s/blog_602f87700102x01t.html">NDKå‡çº§é‡åˆ°çš„ä¸€äº›é—®é¢˜æ±‡æ€»</a><br><a target="_blank" rel="noopener" href="https://www.dllhook.com/post/211.html"> WARNING: linker: .&#x2F;demo: unused DT entry: type 0x6ffffffe è§£å†³ï¼ï¼</a></p>
</div><div class="post-copyright"><script type="text/javascript" src="/blog/js/copyright.js?v=1.0.0" successtext="å¤åˆ¶æˆåŠŸï¼"></script><link rel="stylesheet" type="text/css" href="/blog/css/copyright.css?v=1.0.0"><p><span>æœ¬æ–‡æ ‡é¢˜ï¼š</span>W/linker: libxxx.so: unused DT entry: type 0x6ffffffe arg 0x5a4</p><p><span>æ–‡ç« ä½œè€…ï¼š</span>xmaihh</p><p><span>å‘å¸ƒæ—¶é—´ï¼š</span>2019-03-05</p><p><span>æœ€åæ›´æ–°ï¼š</span>2019-03-05</p><p><span>åŸå§‹é“¾æ¥ï¼š</span><a href="/2019/03/05/w-linker-libxxx-so-unused-dt-entry-type-0x6ffffffe-arg-0x5a4/">https://xmaihh.github.io/blog/2019/03/05/w-linker-libxxx-so-unused-dt-entry-type-0x6ffffffe-arg-0x5a4/</a><span class="copy-path"><i class="fa fa-clipboard" data-clipboard-text="https://xmaihh.github.io/blog/2019/03/05/w-linker-libxxx-so-unused-dt-entry-type-0x6ffffffe-arg-0x5a4/"></i></span></p><p><span>ç‰ˆæƒå£°æ˜ï¼š</span>é‡‡ç”¨<a rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by-nc/4.0/">[CC BY-NC-SA 4.0è®¸å¯åè®®]</a>è¿›è¡Œè®¸å¯</p></div><br><script type="text/javascript" src="/blog/js/share.js?v=1.0.0" async></script><a class="article-share-link" data-url="https://xmaihh.github.io/blog/2019/03/05/w-linker-libxxx-so-unused-dt-entry-type-0x6ffffffe-arg-0x5a4/" data-id="cm2e1ez55007mf1q1b9ip8h8u" data-qrcode="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPYAAAD2CAAAAADAeSUUAAADLklEQVR42u3aS3LCQAwFQO5/abLNBvPeyKkCpb1KpYw9LRZCn8cjvp6/rt//eXXn9WeTt7x646vnP/7iwsbGxv4S9vPyyu+59+jXYZ2fExsbG3sf+zoV5eknOWieU+46JzY2Njb2dRK6fvF1gpmXQNjY2NjYE3ae5JJmUxugSasLGxsbex87adbkaSMfErTtqvYruaGXho2Njf3x7Hwq+vl//8l8GxsbG/uD2c/yuncF57qcmI9+X74dGxsbexG7HeLmizJt0/8sZZ6dHxsbG3sT+95FnLsGBm3rvw0cNjY29m52XjAkQ988KPlSZh6gl5/CxsbGXsS+K5FMGlJnjaezxSBsbGzs/8OuH1EGaz4SaNdAD3dOsbGxsT+efTbizRtDbSMpGQy0z8fGxsb+D+xJk2iyphO18m8aNr8Z9GJjY2OvYLeFRzv6TTBtu79d6MHGxsb+D+y2wTRZ/clXcNoh7puvChsbG3sp+94mziQ0Z2Pg4mzY2NjYi9hnazFtsklGuXn6zNd6onIIGxsbezW7beLkLf58+aZtHtUlEzY2NvYK9tmP+zxh/EWBMRkhYGNjY29iTxbik9XMthWVM/KRRlF1YWNjY38h+95xb3Jnm66ShHeWRLGxsbF3sPNE1Q5Q84Pm97drnVHthY2Njf3l7DY5tcvx7WfbwUA+nHhTjWFjY2OvYM9bSGeLm/nYYJJKH3m+xcbGxv5Cdt7in4xy50VFG+I3gcPGxsZex85/4k94OaNdzawHxtjY2Ngr2G3zJV/xmaScs5WdoqmEjY2NvYidr7zkh8tXatq3n7WQonkINjY29gr2YRoon3M2eMhTaZ3AsLGxsRexz2agSfkxGfe2TyuaUNjY2Njr2HnBcNbEP3t+HpT268TGxsbewX6WV5vwkhBMQnNY0mBjY2MvYufX4YJjOQa+d8w8We7ExsbG/i72WdJq21LzNc0k9EXRgo2Njb2OnRQGLXIyPGgDfdhLw8bGxsYelDF5yCZFyOF0GhsbG3s1Ox/NTkqUs6RVnAcbGxt7Hbtt/bSFx1mw8rRUnw0bGxt7ETtPBvnRD5NKiZk8BxsbG3sF+wegvs5Kxkce6wAAAABJRU5ErkJggg==">åˆ†äº«</a><div class="tags"><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/Android/" rel="tag">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/AndroidStudio/" rel="tag">AndroidStudio</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/Jni/" rel="tag">Jni</a></li></ul></div><div class="post-nav"><a class="pre" href="/blog/2019/03/06/gao-zi-jie-yu-di-zi-jie-gao-di-zhi-yu-di-di-zhi-da-duan-mo-shi-yu-xiao-duan-mo-shi-wang-luo-zi-jie-shun-xu-yu-zhu-ji-zi-jie-shun-xu/">é«˜å­—èŠ‚ä¸ä½å­—èŠ‚ã€é«˜åœ°å€ä¸ä½åœ°å€ã€å¤§ç«¯æ¨¡å¼ä¸å°ç«¯æ¨¡å¼ã€ç½‘ç»œå­—èŠ‚é¡ºåºä¸ä¸»æœºå­—èŠ‚é¡ºåº</a><a class="next" href="/blog/2019/03/05/java-getextractedtext-dui-android-shang-de-fei-huo-dong-inputconnection-jing-gao/">java-getExtractedTextå¯¹androidä¸Šçš„éæ´»åŠ¨InputConnectionè­¦å‘Š</a></div><div class="nofancybox" id="vcomment"></div><script src="https://unpkg.com/valine/dist/Valine.min.js"></script><script>var notify = 'false' == 'true' ? true : false;
var verify = 'false' == 'true' ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;
window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'WyoZPeMWzhLWRYAeA5ueZwiI-MdYXbMMI',
  appKey:'2n4nqRtMlbjNwRNodC3rPRQI',
  serverURLs:'https://wyozpemw.api.lncldglobal.com',
  placeholder:'Just so so',
  avatar:'robohash',
  guest_info:guest_info,
  pageSize:'10'
})
</script></div></div></div><div class="pure-u-1 pure-u-md-1-4"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="author-info"><a class="info-avatar" href="/about/" title="å…³äº"><img class="nofancybox" src="/blog/img/avatar.svg"/></a><p>äº²è‡ªéƒ¨ç½² äº²è‡ªæŒ‡æŒ¥</p><a class="info-icon" href="https://github.com/xmaihh" title="Github" target="_blank" style="margin-inline:5px"> <i class="fa fa-github-square" style="margin-inline:5px"></i></a><a class="info-icon" href="/blog/atom.xml" title="RSS" target="_blank" style="margin-inline:5px"> <i class="fa fa-rss-square" style="margin-inline:5px"></i></a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> åˆ†ç±»</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">å­¦ä¹ ç¬”è®°</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/">æŠ€æœ¯åˆ†äº«</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> æ ‡ç­¾</i></div><div class="tagcloud"><a href="/blog/tags/Android/" style="font-size: 15px;">Android</a> <a href="/blog/tags/ADB/" style="font-size: 15px;">ADB</a> <a href="/blog/tags/ANR/" style="font-size: 15px;">ANR</a> <a href="/blog/tags/BLE/" style="font-size: 15px;">BLE</a> <a href="/blog/tags/Lottie/" style="font-size: 15px;">Lottie</a> <a href="/blog/tags/OTA/" style="font-size: 15px;">OTA</a> <a href="/blog/tags/SDK/" style="font-size: 15px;">SDK</a> <a href="/blog/tags/Logcat/" style="font-size: 15px;">Logcat</a> <a href="/blog/tags/AndroidStudio/" style="font-size: 15px;">AndroidStudio</a> <a href="/blog/tags/Jni/" style="font-size: 15px;">Jni</a> <a href="/blog/tags/Serialport/" style="font-size: 15px;">Serialport</a> <a href="/blog/tags/Java/" style="font-size: 15px;">Java</a> <a href="/blog/tags/BT/" style="font-size: 15px;">BT</a> <a href="/blog/tags/RS232/" style="font-size: 15px;">RS232</a> <a href="/blog/tags/Archlinux/" style="font-size: 15px;">Archlinux</a> <a href="/blog/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/blog/tags/ArkUI/" style="font-size: 15px;">ArkUI</a> <a href="/blog/tags/Harmony/" style="font-size: 15px;">Harmony</a> <a href="/blog/tags/C-C/" style="font-size: 15px;">C/C++</a> <a href="/blog/tags/Cloudflare/" style="font-size: 15px;">Cloudflare</a> <a href="/blog/tags/Docker/" style="font-size: 15px;">Docker</a> <a href="/blog/tags/docker-compose/" style="font-size: 15px;">docker-compose</a> <a href="/blog/tags/Debian/" style="font-size: 15px;">Debian</a> <a href="/blog/tags/Ubuntu/" style="font-size: 15px;">Ubuntu</a> <a href="/blog/tags/Flutter/" style="font-size: 15px;">Flutter</a> <a href="/blog/tags/Frp/" style="font-size: 15px;">Frp</a> <a href="/blog/tags/Github-Actions/" style="font-size: 15px;">Github Actions</a> <a href="/blog/tags/Hexo/" style="font-size: 15px;">Hexo</a> <a href="/blog/tags/CI-CD/" style="font-size: 15px;">CI/CD</a> <a href="/blog/tags/Golang/" style="font-size: 15px;">Golang</a> <a href="/blog/tags/Portainer/" style="font-size: 15px;">Portainer</a> <a href="/blog/tags/SQL/" style="font-size: 15px;">SQL</a> <a href="/blog/tags/Mysql/" style="font-size: 15px;">Mysql</a> <a href="/blog/tags/ArchLinux/" style="font-size: 15px;">ArchLinux</a> <a href="/blog/tags/Pixel8/" style="font-size: 15px;">Pixel8</a> <a href="/blog/tags/Magisk/" style="font-size: 15px;">Magisk</a> <a href="/blog/tags/Python/" style="font-size: 15px;">Python</a> <a href="/blog/tags/RecyclerView/" style="font-size: 15px;">RecyclerView</a> <a href="/blog/tags/Gdrive/" style="font-size: 15px;">Gdrive</a> <a href="/blog/tags/ZeroTier/" style="font-size: 15px;">ZeroTier</a> <a href="/blog/tags/Watchdog/" style="font-size: 15px;">Watchdog</a> <a href="/blog/tags/SSH/" style="font-size: 15px;">SSH</a> <a href="/blog/tags/Git/" style="font-size: 15px;">Git</a> <a href="/blog/tags/Github/" style="font-size: 15px;">Github</a> <a href="/blog/tags/Windows/" style="font-size: 15px;">Windows</a> <a href="/blog/tags/Proxy/" style="font-size: 15px;">Proxy</a> <a href="/blog/tags/Sqlite/" style="font-size: 15px;">Sqlite</a> <a href="/blog/tags/Kotlin/" style="font-size: 15px;">Kotlin</a> <a href="/blog/tags/Tailscale/" style="font-size: 15px;">Tailscale</a> <a href="/blog/tags/weixin/" style="font-size: 15px;">weixin</a> <a href="/blog/tags/Openwrt/" style="font-size: 15px;">Openwrt</a> <a href="/blog/tags/npm/" style="font-size: 15px;">npm</a> <a href="/blog/tags/macOS/" style="font-size: 15px;">macOS</a> <a href="/blog/tags/DoH/" style="font-size: 15px;">DoH</a> <a href="/blog/tags/Design-pattern/" style="font-size: 15px;">Design pattern</a> <a href="/blog/tags/Raspberry-Pi/" style="font-size: 15px;">Raspberry Pi</a> <a href="/blog/tags/VLC/" style="font-size: 15px;">VLC</a> <a href="/blog/tags/CRC/" style="font-size: 15px;">CRC</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> æœ€è¿‘æ–‡ç« </i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/blog/2024/10/17/hexo-bo-ke-qi-yong-websub/">Hexoåšå®¢å¯ç”¨ WebSub</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2024/10/16/rang-follow-ren-zheng-wo-de-hexo-bo-ke-ding-yue-yuan/">è®©Followè®¤è¯æˆ‘çš„Hexoåšå®¢è®¢é˜…æº</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2024/09/10/portainer-chong-zhi-admin-deng-lu-mi-ma/">Portaineré‡ç½®adminç™»å½•å¯†ç </a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2024/08/02/hua-shuo-lu-you-qi-xiu-gai-hosts/">åç¡•è·¯ç”±å™¨ä¿®æ”¹Hosts</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2024/07/30/flutter-shi-yong-intl-generator-zai-windows-xia-bao-cuo-cannot-open-file-path-l10n-arb-intl-arb-os-error-wen-jian-ming-mu-lu-ming-huo-juan-biao-yu-fa-bu-zheng-que/">Flutterä½¿ç”¨intl_generatoråœ¨Windowsä¸‹æŠ¥é”™Cannot open file, path = 'l10n-arb/intl_*.arb' (OS Error: æ–‡ä»¶åã€ç›®å½•åæˆ–å·æ ‡è¯­æ³•ä¸æ­£ç¡®</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2024/07/26/zai-hexo-zhong-shi-yong-plantuml/">åœ¨Hexoä¸­ä½¿ç”¨PlantUML</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2024/07/26/yong-yu-gou-jian-he-fa-bu-flutter-ying-yong-cheng-xu-de-github-actions-gong-zuo-liu-cheng/">ç”¨äºæ„å»ºå’Œå‘å¸ƒ Flutter åº”ç”¨ç¨‹åºçš„GitHub Actions å·¥ä½œæµç¨‹</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2024/07/25/flutter-ge-ge-ping-tai-de-gou-jian-chan-wu/">Flutterå„ä¸ªå¹³å°çš„æ„å»ºäº§ç‰©</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2024/07/24/flutter-she-zhi-app-ban-ben/">Flutterè®¾ç½®Appç‰ˆæœ¬</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2024/07/15/windows-xia-jin-wei-github-she-zhi-ssh-dai-li/">Windowsä¸‹ä»…ä¸º GitHub è®¾ç½®SSHä»£ç†</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> å‹æƒ…é“¾æ¥</i></div><ul></ul><a href="https://quincyjiang.github.io/" title="ç˜Ÿç–«é’å¹´" target="_blank">ç˜Ÿç–«é’å¹´</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright Â© 2024 <a href="/blog/." rel="nofollow">å°éº¦.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/blog/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="https://unpkg.com/@fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/blog/js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="https://unpkg.com/@fancyapps/fancybox/dist/jquery.fancybox.min.css"><link rel="stylesheet" type="text/css" href="/blog/css/search.css?v=1.0.0"><script type="text/javascript" src="/blog/js/search.js?v=1.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
  search_path = 'search.xml';
}
var path = '/blog/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" color="100,99,98" opacity="0.7" zIndex="-1" count="150" src="https://unpkg.com/canvas-nest.js/dist/canvas-nest.js"></script><script type="text/javascript" src="/blog/js/love.js?v=1.0.0"></script><script type="text/javascript" src="/blog/js/copycode.js?v=1.0.0" successtext="å¤åˆ¶æˆåŠŸï¼"></script><link rel="stylesheet" type="text/css" href="/blog/css/copycode.css?v=1.0.0"><script type="text/javascript" src="/blog/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/blog/js/smartresize.js?v=1.0.0"></script></div></body></html>